<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>
    <div metal:fill-slot="main">
    <metal:main-macro define-macro="main" tal:define="view here/@@dataCentreReporting;
                                                      rodsinfo here/@@reportingObligationInfo;
                                                      object_title context/@@plone_context_state/object_title">
        <h1 class="documentFirstHeading">
            <span tal:content="object_title">Title or id</span> &mdash; related reporting obligations
        </h1>

        <div tal:replace="structure provider:plone.documentactions" />

        <div class="visualClear"></div>
        <div class="documentDescription">
        Reporting obligations are requirements to provide information agreed between countries and international bodies such as the EEA or international conventions. 
        Reporting obligations provide the basis for most environmental information flows.  
        </div>
        <h2>Reporting obligations related to data stored at EEA</h2>
        <table id="related-dc-rods" class="sortable listing">
        <thead>
        <th class="sort">ID</th><th style="width:100em">Title/Description</th><th>Reporting frequency</th><th>Next report deadline</th>
        </thead>
        <tbody>
        <tr tal:repeat="roditem view/relatedReportingObligations">
             <td tal:content="roditem/id">id</td>
             <td>
                <h3><a href="" tal:attributes="href roditem/url" class="moreLink"><span tal:replace="roditem/Title">title</span></a>
                <tal:terminated define="terminated python:rodsinfo[int(roditem['id'])]['TERMINATE']">
                   <span tal:condition="python:terminated=='Y'">(TERMINATED)</span>
                </tal:terminated>
                </h3>
             <span tal:content="roditem/Description">description</span></td>
             <td tal:define="months python:rodsinfo[int(roditem['id'])]['REPORT_FREQ_MONTHS']">
                <span tal:condition="python:months!='0' and months!=''" tal:replace="python:months+' months'"></span>
                <span tal:condition="python:months==''" tal:content="python:rodsinfo[int(roditem['id'])]['NEXT_REPORTING']"></span>
                <span tal:condition="python:months=='0'">One time only</span>
             </td>
             <td tal:content="python:rodsinfo[int(roditem['id'])]['NEXT_DEADLINE']"></td>
        </tr>
        </tbody>
        </table>
        
    </metal:main-macro>
    </div>
</body>
</html>
